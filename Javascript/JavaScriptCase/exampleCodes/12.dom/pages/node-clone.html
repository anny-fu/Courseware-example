<!DOCTYPE html><html lang="cmn-Hans-CN"><head>	<meta charset="UTF-8">	<title>节点克隆</title>	<style>		ul {			width: 220px;			padding: 10px 40px;			border: 1px solid #999;			margin-right: 20px;			float: left;		}		ul > li {			cursor: pointer;		}		ul > li:hover {			color: #677691;		}		ul > li:active {			color: #333;		}	</style></head><body>	<!-- HTML部分 -->	<ul id="roleName">		<li>关羽</li>		<li>张飞</li>		<li>赵云</li>		<li>黄忠</li>		<li>马超</li>	</ul>	<ul id="roleName-clone"></ul>	<button id="btnInsert-role" type="button" class="normal">插入角色</button>	<!-- JavaScript部分 -->	<script>			// 为所有英雄绑定点击克隆事件			var roleItem = document.getElementsByTagName("li"),			roleItem_leng = roleItem.length;			for(var i = 0; i < roleItem_leng; i++) {				roleItem[i].onclick = function() {					// 克隆该节点（如果这里不设置参数或者将参数设置为false，都无法克隆文本节点）					var cloneLi = this.cloneNode(true);					// 克隆元素存放列表					var roleNameClone = document.getElementById("roleName-clone");					// 如果该英雄不存在于克隆列表内					if(!(new RegExp(cloneLi.textContent).test(roleNameClone.textContent))) {						// 将克隆好的元素添加进去						roleNameClone.appendChild(cloneLi);					} else {						alert("该英雄已经存在");					}				}			}		</script>		<!-- 在指定节点前插入节点 -->		<!-- JavaScript部分 -->		<script>			// 原英雄列表			var roleName = document.getElementById("roleName");			// 候选英雄列表			var candidate = document.getElementById("candidate");			// 绑定插入角色按钮事件			var btnInsertRole = document.getElementById("btnInsert-role");			btnInsertRole.onclick = function() {				// 候选英雄列表如果不为0				if(candidate.childElementCount) {					// 在“马超”之前插入候选英雄					roleName.insertBefore(candidate.firstElementChild, roleName.lastElementChild);				}				else {					alert("已经没有候选英雄了！");				}			}		</script>		<!-- 在指定节点后插入节点 -->		<script>			// 为节点对象添加一个原型链方法			Node.prototype.insertAfter = function(newNode,currentNodeChild) {				this.insertBefore(newNode,currentNodeChild.nextSibling);			}			// 原英雄列表			var roleName = document.getElementById("roleName");			// 候选英雄列表			var candidate = document.getElementById("candidate");			// 绑定插入角色按钮事件			var btnInsertRole = document.getElementById("btnInsert-role");			btnInsertRole.onclick = function() {				// 候选英雄列表如果不为0				if(candidate.childElementCount) {					// 使用自定义方法，在“盖伦”之后插入候选英雄					roleName.insertAfter(candidate.firstElementChild, roleName.firstElementChild);				}				else {					alert("已经没有候选英雄了！");				}			}		</script>		<!-- 用一个新节点替换当前节点 -->		<script>			(function(){				// 原英雄列表				var roleName = document.getElementById("roleName");				// 候选替换英雄列表				var candidate = document.getElementById("candidate");				// 候选列表剩余英雄个数				var heroCount_static = candidate.childElementCount;				// 绑定替换角色按钮事件				var btnReplaceRole = document.getElementById("btnReplace-role");				btnReplaceRole.onclick = function() {					// 当前候选列表剩余英雄个数					var heroCount_dynamic = candidate.childElementCount;					// 如果候选替换英雄列表还不为零					if(heroCount_dynamic) {						roleName.replaceChild(							candidate.firstElementChild,							// 这里的下标相当于用5减去候选列表内剩余的项数，分别是5/4/3/2/1							roleName.children[heroCount_static - heroCount_dynamic]						);					} else {						alert("已经没有可以替换的英雄了");					}				}			})();		</script>	</body>	</html>